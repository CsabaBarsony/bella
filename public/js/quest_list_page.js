(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var cs = require('../helpers/cs');

var QuestListPage = React.createClass({
	displayName: 'QuestListPage',

	componentDidMount: function componentDidMount() {
		bella.event.subscribe('userStatusChange', function (options, emitter) {
			console.log('user status change', options.status);
		});
	},
	render: function render() {
		return React.createElement(
			'div',
			{ className: 'bc-quest-list-page' },
			React.createElement(
				'h1',
				null,
				'Quests'
			),
			React.createElement(QuestList, null)
		);
	}
});

var QuestList = React.createClass({
	displayName: 'QuestList',

	getInitialState: function getInitialState() {
		return { questList: {} };
	},
	componentDidMount: function componentDidMount() {
		var _this = this;

		cs.get('quest_list', function (response) {
			_this.setState({ questList: response.data });
		});
	},
	render: function render() {
		var questList = _.map(this.state.questList, function (quest, key) {
			return React.createElement(Quest, {
				key: key,
				questId: quest.id,
				title: quest.title,
				description: quest.description });
		});

		return React.createElement(
			'div',
			{ className: 'bc-quest-list' },
			questList
		);
	}
});

var Quest = React.createClass({
	displayName: 'Quest',

	render: function render() {
		var link = '/quest.html?quest_id=' + this.props.questId;

		return React.createElement(
			'div',
			{ className: 'bc-quest' },
			React.createElement(
				'div',
				null,
				React.createElement(
					'span',
					null,
					'title: '
				),
				React.createElement(
					'a',
					{ href: link },
					this.props.title
				)
			)
		);
	}
});

ReactDOM.render(React.createElement(QuestListPage, null), document.getElementById('main-section'));

},{"../helpers/cs":2}],2:[function(require,module,exports){
'use strict';

var cs = {
	log: function log(text) {
		console.log(text);
	},
	get: function get(url, success) {
		var xhr = new XMLHttpRequest();

		xhr.onreadystatechange = function () {
			if (xhr.readyState === XMLHttpRequest.DONE) {
				if (xhr.status === 200) {
					success(JSON.parse(xhr.response));
				} else {
					console.error('ajax get error');
				}
			}
		};
		xhr.open('GET', url);
		xhr.send();
	},
	post: function post(url, data, success) {
		var xhr = new XMLHttpRequest();

		xhr.onreadystatechange = function () {
			if (xhr.readyState === XMLHttpRequest.DONE) {
				if (xhr.status === 200) {
					success(JSON.parse(xhr.response));
				} else {
					console.error('ajax post error');
				}
			}
		};
		xhr.open('POST', url);
		xhr.setRequestHeader('Content-type', 'application/json');
		xhr.send(JSON.stringify(data));
	},
	cookie: function cookie(name, cookies) {
		var c = this.cookies(cookies);
		return c[name];
	},
	cookies: function cookies(_cookies) {
		var nameValues = _cookies.split('; ');
		var result = {};
		nameValues.forEach(function (item) {
			var i = item.split('=');
			result[i[0]] = i[1];
		});
		return result;
	},
	getQueryValue: function getQueryValue(queryString, name) {
		var arr = queryString.match(new RegExp(name + '=([^&]+)'));

		if (arr) {
			return arr[1];
		} else {
			return null;
		}
	}
};

var tests = [{
	id: 1,
	test: function test() {
		var cookies = {
			csati: 'majom',
			one: 'two'
		};

		var result = true;

		var c = cs.cookies('csati=majom; one=two');

		if (c.csati !== cookies.csati) result = false;

		return result;
	}
}, {
	id: 2,
	test: function test() {
		return 'bar' === cs.cookie('foo', 'foo=bar; te=majom');
	}
}, {
	id: 3,
	test: function test() {
		return '123' === cs.getQueryValue('?csati=majom&user_id=123&valami=semmi', 'user_id');
	}
}];

if (false) {
	var result = true;
	tests.forEach(function (test) {
		if (!test.test()) {
			console.error(test.id + '. test failed');
			result = false;
		}
	});
	if (result) {
		console.log('All tests succeeded!');
	}
}

module.exports = cs;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwicXVlc3RfbGlzdF9wYWdlLmpzIiwiY3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLElBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQzs7QUFFbEMsSUFBSSxhQUFhLEdBQUcsS0FBSyxDQUFDLFdBQVcsQ0FBQzs7O0FBQ3JDLGtCQUFpQixFQUFFLDZCQUFXO0FBQzdCLE9BQUssQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLGtCQUFrQixFQUFFLFVBQVMsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUNwRSxVQUFPLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztHQUNsRCxDQUFDLENBQUM7RUFDSDtBQUNELE9BQU0sRUFBRSxrQkFBVztBQUNsQixTQUNDOztLQUFLLFNBQVMsRUFBQyxvQkFBb0I7R0FDbEM7Ozs7SUFBZTtHQUNmLG9CQUFDLFNBQVMsT0FBRztHQUNSLENBQ0w7RUFDRjtDQUNELENBQUMsQ0FBQzs7QUFFSCxJQUFJLFNBQVMsR0FBRyxLQUFLLENBQUMsV0FBVyxDQUFDOzs7QUFDakMsZ0JBQWUsRUFBRSwyQkFBVztBQUMzQixTQUFPLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxDQUFBO0VBQ3hCO0FBQ0Qsa0JBQWlCLEVBQUUsNkJBQVc7OztBQUM3QixJQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksRUFBRSxVQUFDLFFBQVEsRUFBSztBQUNsQyxTQUFLLFFBQVEsQ0FBQyxFQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztHQUMxQyxDQUFDLENBQUM7RUFDSDtBQUNELE9BQU0sRUFBRSxrQkFBVztBQUNsQixNQUFJLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMs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S0FBSyxFQUFFLE1BQU0sR0FBRyxLQUFLLENBQUM7O0FBRTdDLFNBQU8sTUFBTSxDQUFDO0VBQ2Q7Q0FDRCxFQUNEO0FBQ0MsR0FBRSxFQUFFLENBQUM7QUFDTCxLQUFJLEVBQUUsZ0JBQVc7QUFDaEIsU0FBUSxLQUFLLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsbUJBQW1CLENBQUMsQ0FBRTtFQUN6RDtDQUNELEVBQ0Q7QUFDQyxHQUFFLEVBQUUsQ0FBQztBQUNMLEtBQUksRUFBRSxnQkFBVztBQUNoQixTQUFPLEtBQUssS0FBSyxFQUFFLENBQUMsYUFBYSxDQUFDLHVDQUF1QyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0VBQ3RGO0NBQ0QsQ0FDRCxDQUFDOztBQUVGLElBQUcsS0FBSyxFQUFFO0FBQ1QsS0FBSSxNQUFNLEdBQUcsSUFBSSxDQUFDO0FBQ2xCLE1BQUssQ0FBQyxPQUFPLENBQUMsVUFBUyxJQUFJLEVBQUU7QUFDNUIsTUFBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtBQUNoQixVQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsZUFBZSxDQUFDLENBQUM7QUFDekMsU0FBTSxHQUFHLEtBQUssQ0FBQztHQUNmO0VBQ0QsQ0FBQyxDQUFDO0FBQ0gsS0FBRyxNQUFNLEVBQUU7QUFDVixTQUFPLENBQUMsR0FBRyxDQUFDLHNCQUFzQixDQUFDLENBQUM7RUFDcEM7Q0FDRDs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgY3MgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2NzJyk7XHJcblxyXG52YXIgUXVlc3RMaXN0UGFnZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuXHRjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKSB7XHJcblx0XHRiZWxsYS5ldmVudC5zdWJzY3JpYmUoJ3VzZXJTdGF0dXNDaGFuZ2UnLCBmdW5jdGlvbihvcHRpb25zLCBlbWl0dGVyKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCd1c2VyIHN0YXR1cyBjaGFuZ2UnLCBvcHRpb25zLnN0YXR1cyk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImJjLXF1ZXN0LWxpc3QtcGFnZVwiPlxyXG5cdFx0XHRcdDxoMT5RdWVzdHM8L2gxPlxyXG5cdFx0XHRcdDxRdWVzdExpc3QgLz5cclxuXHRcdFx0PC9kaXY+XHJcblx0XHQpO1xyXG5cdH1cclxufSk7XHJcblxyXG52YXIgUXVlc3RMaXN0ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG5cdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4geyBxdWVzdExpc3Q6IHt9IH1cclxuXHR9LFxyXG5cdGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcclxuXHRcdGNzLmdldCgncXVlc3RfbGlzdCcsIChyZXNwb25zZSkgPT4ge1xyXG5cdFx0XHR0aGlzLnNldFN0YXRlKHtxdWVzdExpc3Q6IHJlc3BvbnNlLmRhdGF9KTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0cmVuZGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBxdWVzdExpc3QgPSBfLm1hcCh0aGlzLnN0YXRlLnF1ZXN0TGlzdCwgZnVuY3Rpb24ocXVlc3QsIGtleSkge1xyXG5cdFx0XHRyZXR1cm4gKFxyXG5cdFx0XHRcdDxRdWVzdFxyXG5cdFx0XHRcdFx0a2V5PXtrZXl9XHJcblx0XHRcdFx0XHRxdWVzdElkPXtxdWVzdC5pZH1cclxuXHRcdFx0XHRcdHRpdGxlPXtxdWVzdC50aXRsZX1cclxuXHRcdFx0XHRcdGRlc2NyaXB0aW9uPXtxdWVzdC5kZXNjcmlwdGlvbn0gLz5cclxuXHRcdFx0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHJldHVybiAoXHJcblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiYmMtcXVlc3QtbGlzdFwiPlxyXG5cdFx0XHRcdHtxdWVzdExpc3R9XHJcblx0XHRcdDwvZGl2PlxyXG5cdFx0KTtcclxuXHR9XHJcbn0pO1xyXG5cclxudmFyIFF1ZXN0ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG5cdHJlbmRlcjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbGluayA9ICcvcXVlc3QuaHRtbD9xdWVzdF9pZD0nICsgdGhpcy5wcm9wcy5xdWVzdElkO1xyXG5cclxuXHRcdHJldHVybiAoXHJcblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiYmMtcXVlc3RcIj5cclxuXHRcdFx0XHQ8ZGl2PjxzcGFuPnRpdGxlOiA8L3NwYW4+PGEgaHJlZj17bGlua30+e3RoaXMucHJvcHMudGl0bGV9PC9hPjwvZGl2PlxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdCk7XHJcblx0fVxyXG59KTtcclxuXHJcblJlYWN0RE9NLnJlbmRlcihcclxuXHQ8UXVlc3RMaXN0UGFnZSAvPixcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbi1zZWN0aW9uJylcclxuKTtcclxuIiwidmFyIGNzID0ge1xuXHRsb2c6IGZ1bmN0aW9uKHRleHQpe1xuXHRcdGNvbnNvbGUubG9nKHRleHQpO1xuXHR9LFxuXHRnZXQ6IGZ1bmN0aW9uKHVybCwgc3VjY2Vzcyl7XG5cdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKHhoci5yZWFkeVN0YXRlID09PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7XG5cdFx0XHRcdGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdFx0XHRzdWNjZXNzKEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcignYWpheCBnZXQgZXJyb3InKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0eGhyLm9wZW4oJ0dFVCcsIHVybCk7XG5cdFx0eGhyLnNlbmQoKTtcblx0fSxcblx0cG9zdDogZnVuY3Rpb24odXJsLCBkYXRhLCBzdWNjZXNzKXtcblx0XHR2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cblx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcblx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuXHRcdFx0XHRcdHN1Y2Nlc3MoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2UpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdhamF4IHBvc3QgZXJyb3InKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0eGhyLm9wZW4oJ1BPU1QnLCB1cmwpO1xuXHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXHRcdHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcblx0fSxcblx0Y29va2llOiBmdW5jdGlvbihuYW1lLCBjb29raWVzKSB7XG5cdFx0dmFyIGMgPSB0aGlzLmNvb2tpZXMoY29va2llcyk7XG5cdFx0cmV0dXJuIGNbbmFtZV07XG5cdH0sXG5cdGNvb2tpZXM6IGZ1bmN0aW9uKGNvb2tpZXMpIHtcblx0XHR2YXIgbmFtZVZhbHVlcyA9IGNvb2tpZXMuc3BsaXQoJzsgJyk7XG5cdFx0dmFyIHJlc3VsdCA9IHt9O1xuXHRcdG5hbWVWYWx1ZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHR2YXIgaSA9IGl0ZW0uc3BsaXQoJz0nKTtcblx0XHRcdHJlc3VsdFtpWzBdXSA9IGlbMV07XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblx0Z2V0UXVlcnlWYWx1ZTogZnVuY3Rpb24ocXVlcnlTdHJpbmcsIG5hbWUpIHtcblx0XHR2YXIgYXJyID0gcXVlcnlTdHJpbmcubWF0Y2gobmV3IFJlZ0V4cChuYW1lICsgJz0oW14mXSspJykpO1xuXG5cdFx0aWYoYXJyKSB7XG5cdFx0XHRyZXR1cm4gYXJyWzFdO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0fVxufTtcblxudmFyIHRlc3RzID0gW1xuXHR7XG5cdFx0aWQ6IDEsXG5cdFx0dGVzdDogZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29va2llcyA9IHtcblx0XHRcdFx0Y3NhdGk6ICdtYWpvbScsXG5cdFx0XHRcdG9uZTogJ3R3bydcblx0XHRcdH07XG5cblx0XHRcdHZhciByZXN1bHQgPSB0cnVlO1xuXG5cdFx0XHR2YXIgYyA9IGNzLmNvb2tpZXMoJ2NzYXRpPW1ham9tOyBvbmU9dHdvJyk7XG5cblx0XHRcdGlmKGMuY3NhdGkgIT09IGNvb2tpZXMuY3NhdGkpIHJlc3VsdCA9IGZhbHNlO1xuXG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblx0fSxcblx0e1xuXHRcdGlkOiAyLFxuXHRcdHRlc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuICgnYmFyJyA9PT0gY3MuY29va2llKCdmb28nLCAnZm9vPWJhcjsgdGU9bWFqb20nKSk7XG5cdFx0fVxuXHR9LFxuXHR7XG5cdFx0aWQ6IDMsXG5cdFx0dGVzdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gJzEyMycgPT09IGNzLmdldFF1ZXJ5VmFsdWUoJz9jc2F0aT1tYWpvbSZ1c2VyX2lkPTEyMyZ2YWxhbWk9c2VtbWknLCAndXNlcl9pZCcpO1xuXHRcdH1cblx0fVxuXTtcblxuaWYoZmFsc2UpIHtcblx0dmFyIHJlc3VsdCA9IHRydWU7XG5cdHRlc3RzLmZvckVhY2goZnVuY3Rpb24odGVzdCkge1xuXHRcdGlmKCF0ZXN0LnRlc3QoKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcih0ZXN0LmlkICsgJy4gdGVzdCBmYWlsZWQnKTtcblx0XHRcdHJlc3VsdCA9IGZhbHNlO1xuXHRcdH1cblx0fSk7XG5cdGlmKHJlc3VsdCkge1xuXHRcdGNvbnNvbGUubG9nKCdBbGwgdGVzdHMgc3VjY2VlZGVkIScpO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3M7Il19
